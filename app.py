import streamlit as st
import streamlit as st
import os

# เดเตเดเดฟเตพ เดตเตเดฐเดฟเดซเดฟเดเตเดเตเดทเตป เดซเดฏเตฝ เดฑเตเดกเต เดเตเดฏเตเดฏเดพเตป
verification_file = "google-xxxxxx.html" # เดจเดฟเดเตเดเดณเตเดเต เดซเดฏเดฒเดฟเดจเตเดฑเต เดชเตเดฐเต เดเดตเดฟเดเต เดจเตฝเดเตเด

if os.path.exists(verification_file):
    with open(verification_file, "r") as f:
        html_content = f.read()
        # เดเดคเต เดธเตเดฑเตเดฑเดฟเดจเตเดฑเต เดเดคเตเดเตเดเดฟเดฒเตเด เดญเดพเดเดคเตเดคเต เดเดพเดฃเดฟเดเตเดเดฃเด เดเดจเตเดจเดฟเดฒเตเดฒ, 
        # เดชเดเตเดทเต เดเตเดเดฟเดณเดฟเดจเต เดเดเตเดธเดธเต เดเตเดฏเตเดฏเดพเตป เดธเดนเดพเดฏเดฟเดเตเดเตเด.
st.set_page_config(
    page_title="KPSC Photo Resizer - Online Tool",
    page_icon="๐ธ",
    layout="centered"
)
from PIL import Image, ImageDraw, ImageOps

st.title("KPSC เดซเตเดเตเดเต เดฎเตเดเตเดเตผ")

name = st.text_input("เดซเตเดเตเดเตเดฏเดฟเตฝ เดจเตฝเดเตเดฃเตเด เดชเตเดฐเต:")
date = st.text_input("เดซเตเดเตเดเต เดเดเตเดคเตเดค เดคเตเดฏเดคเดฟ (DD/MM/YYYY):")

uploaded_file = st.file_uploader("เดจเดฟเดเตเดเดณเตเดเต เดซเตเดเตเดเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดฏเตเด", type=['jpg', 'jpeg', 'png'])

if uploaded_file is not None:
    # 1. เดซเตเดเตเดเต เดคเตเดฑเดเตเดเตเดจเตเดจเต
    img = Image.open(uploaded_file)
    
    # 2. เดซเตเดเตเดเต 150x200 เดธเตเดธเดฟเดฒเตเดเตเดเต เดฎเดพเดฑเตเดฑเตเดจเตเดจเต
    img = img.resize((150, 200))
    
    # 3. เดคเดพเดดเต เดตเตเดณเตเดณ เดฌเตเดเตเดธเต เดเตเตผเดเตเดเตเดจเตเดจเต (เดเดชเตเดชเตเตพ เดฌเตเตผเดกเตผ เดเดฒเตเดฒ)
    img_with_white_box = ImageOps.expand(img, border=(0, 0, 0, 50), fill='white')
    
    # 4. เดตเตเดณเตเดณ เดฌเตเดเตเดธเดฟเตฝ เดชเตเดฐเตเด เดคเตเดฏเดคเดฟเดฏเตเด เดเดดเตเดคเตเดจเตเดจเต
    draw = ImageDraw.Draw(img_with_white_box)
    draw.text((10, 205), f"NAME: {name}", fill="black")
    draw.text((10, 225), f"DATE: {date}", fill="black")
    
    # 5. เดซเตเดเตเดเตเดฏเตเดเตเดเตเด เดฌเตเดเตเดธเดฟเดจเตเด เดเตเดเดฟ เดฎเตเดคเตเดคเดคเตเดคเดฟเตฝ เดเดฐเตเดฑเตเดฑ เดฌเตเตผเดกเตผ เดจเตฝเดเตเดจเตเดจเต
    # border=1 เดเดจเตเดจเดคเต 1 pixel เดเดจเด เดจเตฝเดเตเด
    final_img = ImageOps.expand(img_with_white_box, border=1, fill='black')

    # 6. เดซเตเดเตเดเต เดธเตเดเตเดฐเตเดจเดฟเตฝ เดเดพเดฃเดฟเดเตเดเตเดจเตเดจเต
    st.image(final_img, caption='PSC เดจเดฟเดฌเดจเตเดงเดจ เดชเตเดฐเดเดพเดฐเดฎเตเดณเตเดณ เดซเตเดเตเดเต', use_container_width=False)

    # 7. เดกเตเตบเดฒเตเดกเต เดฌเดเตเดเตบ (เดซเดฏเตฝ เดธเตเดธเต เดจเดฟเดฏเดจเตเดคเตเดฐเดฟเดเตเดเดพเตป quality=95 เดจเตฝเดเตเดจเตเดจเต)
    final_img.save("kpsc_final.jpg", quality=95)
    with open("kpsc_final.jpg", "rb") as file:
        st.download_button(
            label="เดซเตเดเตเดเต เดกเตเตบเดฒเตเดกเต เดเตเดฏเตเดฏเตเด",
            data=file,
            file_name="kpsc_photo.jpg",
            mime="image/jpg"
        )


