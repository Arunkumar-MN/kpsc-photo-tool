import streamlit as st

# 1. ‡¥∏‡µÜ‡µº‡¥ö‡µç‡¥ö‡µç ‡¥é‡¥û‡µç‡¥ö‡¥ø‡¥®‡µÅ‡¥ï‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥∏‡µà‡¥±‡µç‡¥±‡¥ø‡¥®‡µÜ ‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥á‡¥§‡µç ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç
st.set_page_config(
    page_title="KPSC Photo Maker - Online",
    page_icon="üì∏",
    menu_items={
        'Get Help': 'https://your-website-link',
        'About': "# KPSC ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥é‡¥°‡¥ø‡¥±‡µç‡¥±‡µº. ‡¥ï‡µá‡¥∞‡¥≥ ‡¥™‡¥ø.‡¥é‡¥∏‡µç.‡¥∏‡¥ø ‡¥®‡¥ø‡¥¨‡¥®‡µç‡¥ß‡¥®‡¥™‡µç‡¥∞‡¥ï‡¥æ‡¥∞‡¥Ç ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥§‡¥Ø‡µç‡¥Ø‡¥æ‡¥±‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ."
    }
)

# 2. ‡¥ó‡µÇ‡¥ó‡¥ø‡µæ ‡¥µ‡µÜ‡¥∞‡¥ø‡¥´‡¥ø‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª ‡¥ü‡¥æ‡¥ó‡µç (Meta Tag) ‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï
# ‡¥à ‡¥µ‡¥∞‡¥ø ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ app.py-‡µΩ ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡¥æ‡µΩ ‡¥ó‡µÇ‡¥ó‡¥ø‡µæ ‡¥¨‡µã‡¥ü‡µç‡¥ü‡¥ø‡¥®‡µç ‡¥∏‡µà‡¥±‡µç‡¥±‡µç ‡¥µ‡µÜ‡¥∞‡¥ø‡¥´‡µà ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥™‡¥±‡µç‡¥±‡µÅ‡¥Ç
st.markdown('<meta name="google-site-verification" content="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ_‡¥ï‡µã‡¥°‡µç_‡¥á‡¥µ‡¥ø‡¥ü‡µÜ_‡¥®‡µΩ‡¥ï‡µÅ‡¥ï" />', unsafe_allow_html=True)

st.title("KPSC ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Æ‡µá‡¥ï‡µç‡¥ï‡µº")
import streamlit as st

# ‡¥ó‡µÇ‡¥ó‡¥ø‡µæ ‡¥®‡µΩ‡¥ï‡¥ø‡¥Ø ‡¥Æ‡µÜ‡¥±‡µç‡¥±‡¥æ ‡¥ü‡¥æ‡¥ó‡µç ‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥™‡µá‡¥∏‡µç‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï
# ‡¥â‡¥¶‡¥æ‡¥π‡¥∞‡¥£‡¥§‡µç‡¥§‡¥ø‡¥®‡µç: <meta name="google-site-verification" content="YOUR_CODE_HERE" />
google_verification_code = '<meta name="google-site-verification" content="‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ_‡¥ï‡µã‡¥°‡µç_‡¥á‡¥µ‡¥ø‡¥ü‡µÜ_‡¥®‡µΩ‡¥ï‡µÅ‡¥ï" />'

# ‡¥á‡¥§‡µç ‡¥∏‡µç‡¥ü‡µç‡¥∞‡µÄ‡¥Ç‡¥≤‡¥ø‡¥±‡µç‡¥±‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥π‡µÜ‡¥°‡¥±‡¥ø‡µΩ ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç
st.markdown(google_verification_code, unsafe_allow_html=True)

st.title("KPSC ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Æ‡µá‡¥ï‡µç‡¥ï‡µº")
# ‡¥¨‡¥æ‡¥ï‡µç‡¥ï‡¥ø ‡¥ï‡µã‡¥°‡µÅ‡¥ï‡µæ...
import streamlit as st
import streamlit as st
import os

# ‡¥ó‡µÇ‡¥ó‡¥ø‡µæ ‡¥µ‡µÜ‡¥∞‡¥ø‡¥´‡¥ø‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª ‡¥´‡¥Ø‡µΩ ‡¥±‡µÄ‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª
verification_file = "google-xxxxxx.html" # ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥´‡¥Ø‡¥≤‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥™‡µá‡¥∞‡µç ‡¥á‡¥µ‡¥ø‡¥ü‡µÜ ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï

if os.path.exists(verification_file):
    with open(verification_file, "r") as f:
        html_content = f.read()
        # ‡¥á‡¥§‡µç ‡¥∏‡µà‡¥±‡µç‡¥±‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥è‡¥§‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥Ç ‡¥≠‡¥æ‡¥ó‡¥§‡µç‡¥§‡µç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥£‡¥Ç ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥≤‡µç‡¥≤, 
        # ‡¥™‡¥ï‡µç‡¥∑‡µÜ ‡¥ó‡µÇ‡¥ó‡¥ø‡¥≥‡¥ø‡¥®‡µç ‡¥Ü‡¥ï‡µç‡¥∏‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç.
st.set_page_config(
    page_title="KPSC Photo Resizer - Online Tool",
    page_icon="üì∏",
    layout="centered"
)
from PIL import Image, ImageDraw, ImageOps

st.title("KPSC ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Æ‡µá‡¥ï‡µç‡¥ï‡µº")

name = st.text_input("‡¥´‡µã‡¥ü‡µç‡¥ü‡µã‡¥Ø‡¥ø‡µΩ ‡¥®‡µΩ‡¥ï‡µá‡¥£‡µç‡¥ü ‡¥™‡µá‡¥∞‡µç:")
date = st.text_input("‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥é‡¥ü‡µÅ‡¥§‡µç‡¥§ ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø (DD/MM/YYYY):")

uploaded_file = st.file_uploader("‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï", type=['jpg', 'jpeg', 'png'])

if uploaded_file is not None:
    # 1. ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
    img = Image.open(uploaded_file)
    
    # 2. ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã 150x200 ‡¥∏‡µà‡¥∏‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡¥æ‡¥±‡µç‡¥±‡µÅ‡¥®‡µç‡¥®‡µÅ
    img = img.resize((150, 200))
    
    # 3. ‡¥§‡¥æ‡¥¥‡µÜ ‡¥µ‡µÜ‡¥≥‡µç‡¥≥ ‡¥¨‡µã‡¥ï‡µç‡¥∏‡µç ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ (‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥¨‡µã‡µº‡¥°‡µº ‡¥á‡¥≤‡µç‡¥≤)
    img_with_white_box = ImageOps.expand(img, border=(0, 0, 0, 50), fill='white')
    
    # 4. ‡¥µ‡µÜ‡¥≥‡µç‡¥≥ ‡¥¨‡µã‡¥ï‡µç‡¥∏‡¥ø‡µΩ ‡¥™‡µá‡¥∞‡µÅ‡¥Ç ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø‡¥Ø‡µÅ‡¥Ç ‡¥é‡¥¥‡µÅ‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ
    draw = ImageDraw.Draw(img_with_white_box)
    draw.text((10, 205), f"NAME: {name}", fill="black")
    draw.text((10, 225), f"DATE: {date}", fill="black")
    
    # 5. ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥¨‡µã‡¥ï‡µç‡¥∏‡¥ø‡¥®‡µÅ‡¥Ç ‡¥ï‡µÇ‡¥ü‡¥ø ‡¥Æ‡µä‡¥§‡µç‡¥§‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥í‡¥∞‡µä‡¥±‡µç‡¥± ‡¥¨‡µã‡µº‡¥°‡µº ‡¥®‡µΩ‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
    # border=1 ‡¥é‡¥®‡µç‡¥®‡¥§‡µç 1 pixel ‡¥ï‡¥®‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥Ç
    final_img = ImageOps.expand(img_with_white_box, border=1, fill='black')

    # 6. ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡¥®‡¥ø‡µΩ ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
    st.image(final_img, caption='PSC ‡¥®‡¥ø‡¥¨‡¥®‡µç‡¥ß‡¥® ‡¥™‡µç‡¥∞‡¥ï‡¥æ‡¥∞‡¥Æ‡µÅ‡¥≥‡µç‡¥≥ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã', use_container_width=False)

    # 7. ‡¥°‡µó‡µ∫‡¥≤‡µã‡¥°‡µç ‡¥¨‡¥ü‡µç‡¥ü‡µ∫ (‡¥´‡¥Ø‡µΩ ‡¥∏‡µà‡¥∏‡µç ‡¥®‡¥ø‡¥Ø‡¥®‡µç‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª quality=95 ‡¥®‡µΩ‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ)
    final_img.save("kpsc_final.jpg", quality=95)
    with open("kpsc_final.jpg", "rb") as file:
        st.download_button(
            label="‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥°‡µó‡µ∫‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï",
            data=file,
            file_name="kpsc_photo.jpg",
            mime="image/jpg"
        )




